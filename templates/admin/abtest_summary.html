{% extends "admin/base_site.html" %}
{% block content %}
<h1>A/B Test Summary</h1>
<div id="content-main">

{% if summary_data %}
    <table class="adminlist" style="width: 100%; border-collapse: collapse; margin-top: 10px;">
        <thead>
            <tr style="background-color: #f5f5f5;">
                <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Experiment</th>
                <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Variant</th>
                <th style="padding: 10px; text-align: right; border: 1px solid #ddd;">Impressions</th>
                <th style="padding: 10px; text-align: right; border: 1px solid #ddd;">Conversions</th>
                <th style="padding: 10px; text-align: right; border: 1px solid #ddd;">Conversion Rate</th>
                <th style="padding: 10px; text-align: right; border: 1px solid #ddd;">Uplift vs Baseline</th>
            </tr>
        </thead>
        <tbody>
            {% for row in summary_data %}
                <tr>
                    <td style="padding: 10px; border: 1px solid #ddd;">{{ row.experiment_name }}</td>
                    <td style="padding: 10px; border: 1px solid #ddd;">
                        {% if row.is_baseline %}
                            <strong>{{ row.variant }}</strong> (baseline)
                        {% else %}
                            {{ row.variant }}
                        {% endif %}
                    </td>
                    <td style="padding: 10px; text-align: right; border: 1px solid #ddd;">{{ row.impressions }}</td>
                    <td style="padding: 10px; text-align: right; border: 1px solid #ddd;">{{ row.conversions }}</td>
                    <td style="padding: 10px; text-align: right; border: 1px solid #ddd;">{{ row.conversion_rate_display }}</td>
                    <td style="padding: 10px; text-align: right; border: 1px solid #ddd;">
                        {% if row.uplift_display == "Baseline" %}
                            <span style="color: #666; font-weight: bold;">{{ row.uplift_display }}</span>
                        {% elif row.uplift_display == "N/A" %}
                            <span style="color: #666;">{{ row.uplift_display }}</span>
                        {% elif row.uplift_display|slice:":1" == "+" %}
                            <span style="color: #28a745;">{{ row.uplift_display }}</span>
                        {% else %}
                            <span style="color: #dc3545;">{{ row.uplift_display }}</span>
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>No A/B test data available yet.</p>
{% endif %}

<div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #ddd;">
    <a href="{% url 'admin:core_abtestevent_changelist' %}" class="button">‚Üê Back to AB Test Events</a>
</div>
</div>
{% endblock %}

